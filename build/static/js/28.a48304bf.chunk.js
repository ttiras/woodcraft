(this["webpackJsonpflone-react"]=this["webpackJsonpflone-react"]||[]).push([[28],{523:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return y}));var s=r(522),n=r(1),i=r(0),a=r(169),o=r(50),u=r(4),c=function(){function e(e,t){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=e||{},this.context=t||{}}return e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(e,t){void 0===t&&(t=!1),t&&!Object(o.a)(this.options,e)&&(this.previousOptions=this.options),this.options=e},e.prototype.unmount=function(){this.isMounted=!1},e.prototype.refreshClient=function(){var e=this.options&&this.options.client||this.context&&this.context.client;Object(u.b)(!!e,2);var t=!1;return e!==this.client&&(t=!0,this.client=e,this.cleanup()),{client:this.client,isNew:t}},e.prototype.verifyDocumentType=function(e,t){var r=Object(s.e)(e);Object(s.d)(t),Object(s.d)(r.type);Object(u.b)(r.type===t,3)},e}(),l=function(e){function t(t){var r=t.options,s=t.context,n=t.onNewData,i=e.call(this,r,s)||this;return i.previousData={},i.currentObservable={},i.runLazy=!1,i.runLazyQuery=function(e){i.cleanup(),i.runLazy=!0,i.lazyOptions=e,i.onNewData()},i.getExecuteResult=function(){var e=i.getQueryResult();return i.startQuerySubscription(),e},i.obsRefetch=function(e){return i.currentObservable.query.refetch(e)},i.obsFetchMore=function(e){return i.currentObservable.query.fetchMore(e)},i.obsUpdateQuery=function(e){return i.currentObservable.query.updateQuery(e)},i.obsStartPolling=function(e){i.currentObservable&&i.currentObservable.query&&i.currentObservable.query.startPolling(e)},i.obsStopPolling=function(){i.currentObservable&&i.currentObservable.query&&i.currentObservable.query.stopPolling()},i.obsSubscribeToMore=function(e){return i.currentObservable.query.subscribeToMore(e)},i.onNewData=n,i}return Object(n.__extends)(t,e),t.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,r=e.query;return(t||r!==this.previousData.query)&&(this.removeQuerySubscription(),this.previousData.query=r),this.updateObservableQuery(),this.isMounted&&this.startQuerySubscription(),this.getExecuteSsrResult()||this.getExecuteResult()},t.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:a.b.ready,called:!1,data:void 0}]},t.prototype.fetchData=function(){var e=this.getOptions();if(e.skip||!1===e.ssr)return!1;var t=this.currentObservable.query;return!!t.getCurrentResult().loading&&t.result()},t.prototype.afterExecute=function(e){var t=(void 0===e?{}:e).lazy,r=void 0!==t&&t;return this.isMounted=!0,r&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=this.getOptions(),this.unmount.bind(this)},t.prototype.cleanup=function(){this.removeQuerySubscription(),delete this.currentObservable.query,delete this.previousData.result},t.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this);return this.lazyOptions&&(t.variables=Object(n.__assign)(Object(n.__assign)({},t.variables),this.lazyOptions.variables),t.context=Object(n.__assign)(Object(n.__assign)({},t.context),this.lazyOptions.context)),this.runLazy&&delete t.skip,t},t.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},t.prototype.getExecuteSsrResult=function(){var e,t=!1===this.getOptions().ssr,r=this.refreshClient().client.disableNetworkFetches,s=Object(n.__assign)({loading:!0,networkStatus:a.b.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());return t&&(this.ssrInitiated()||r)?(this.previousData.result=s,s):(this.ssrInitiated()&&(e=this.context.renderPromises.addQueryPromise(this,this.getExecuteResult)||s),e)},t.prototype.prepareObservableQueryOptions=function(){var e=this.getOptions();this.verifyDocumentType(e.query,s.b.Query);var t=e.displayName||"Query";return!this.ssrInitiated()||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e.fetchPolicy="cache-first"),Object(n.__assign)(Object(n.__assign)({},e),{displayName:t,context:e.context,metadata:{reactComponent:{displayName:t}}})},t.prototype.initializeObservableQuery=function(){var e,t;if(this.ssrInitiated()&&(this.currentObservable.query=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable.query){var r=this.prepareObservableQueryOptions();this.previousData.observableQueryOptions=Object(n.__assign)(Object(n.__assign)({},r),{children:null}),this.currentObservable.query=this.refreshClient().client.watchQuery(Object(n.__assign)({},r)),this.ssrInitiated()&&(null===(t=null===(e=this.context)||void 0===e?void 0:e.renderPromises)||void 0===t||t.registerSSRObservable(this.currentObservable.query,r))}},t.prototype.updateObservableQuery=function(){if(this.currentObservable.query){var e=Object(n.__assign)(Object(n.__assign)({},this.prepareObservableQueryOptions()),{children:null});Object(o.a)(e,this.previousData.observableQueryOptions)||(this.previousData.observableQueryOptions=e,this.currentObservable.query.setOptions(e).catch((function(){})))}else this.initializeObservableQuery()},t.prototype.startQuerySubscription=function(){var e=this;if(!this.currentObservable.subscription&&!this.getOptions().skip){var t=this.currentObservable.query;this.currentObservable.subscription=t.subscribe({next:function(t){var r=t.loading,s=t.networkStatus,n=t.data,i=e.previousData.result;i&&i.loading===r&&i.networkStatus===s&&Object(o.a)(i.data,n)||e.onNewData()},error:function(t){if(e.resubscribeToQuery(),!t.hasOwnProperty("graphQLErrors"))throw t;var r=e.previousData.result;(r&&r.loading||!Object(o.a)(t,e.previousData.error))&&(e.previousData.error=t,e.onNewData())}})}},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable.query.getLastError(),t=this.currentObservable.query.getLastResult();this.currentObservable.query.resetLastResults(),this.startQuerySubscription(),Object.assign(this.currentObservable.query,{lastError:e,lastResult:t})},t.prototype.getQueryResult=function(){var e=this.observableQueryFields(),t=this.getOptions();if(t.skip)e=Object(n.__assign)(Object(n.__assign)({},e),{data:void 0,error:void 0,loading:!1,called:!0});else{var r=this.currentObservable.query.getCurrentResult(),s=r.loading,i=r.partial,o=r.networkStatus,u=r.errors,c=r.error,l=r.data;if(u&&u.length>0&&(c=new a.a({graphQLErrors:u})),e=Object(n.__assign)(Object(n.__assign)({},e),{loading:s,networkStatus:o,error:c,called:!0}),s){var p=this.previousData.result&&this.previousData.result.data;e.data=p&&l?Object(n.__assign)(Object(n.__assign)({},p),l):p||l}else if(c)Object.assign(e,{data:(this.currentObservable.query.getLastResult()||{}).data});else{var b=this.currentObservable.query.options.fetchPolicy;if(t.partialRefetch&&!l&&i&&"cache-only"!==b)return Object.assign(e,{loading:!0,networkStatus:a.b.loading}),e.refetch(),e;e.data=l}}return e.client=this.client,this.previousData.loading=this.previousData.result&&this.previousData.result.loading||!1,this.previousData.result=e,this.currentObservable.query&&this.currentObservable.query.resetQueryStoreErrors(),e},t.prototype.handleErrorOrCompleted=function(){if(this.currentObservable.query&&this.previousData.result){var e=this.previousData.result,t=e.data,r=e.loading,s=e.error;if(!r){var n=this.getOptions(),i=n.query,a=n.variables,u=n.onCompleted,c=n.onError;if(this.previousOptions&&!this.previousData.loading&&Object(o.a)(this.previousOptions.query,i)&&Object(o.a)(this.previousOptions.variables,a))return;u&&!s?u(t):c&&s&&c(s)}}},t.prototype.removeQuerySubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)},t.prototype.observableQueryFields=function(){return{variables:this.currentObservable.query.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}},t}(c);function p(e,t,r){void 0===r&&(r=!1);var a=Object(i.useContext)(Object(s.c)()),u=Object(i.useReducer)((function(e){return e+1}),0),c=u[0],p=u[1],b=t?Object(n.__assign)(Object(n.__assign)({},t),{query:e}):{query:e},d=Object(i.useRef)(),h=d.current||new l({options:b,context:a,onNewData:function(){h.ssrInitiated()?p():Promise.resolve().then(p)}});h.setOptions(b),h.context=a,h.ssrInitiated()&&!d.current&&(d.current=h);var v=function(e,t){var r=Object(i.useRef)();return r.current&&Object(o.a)(t,r.current.key)||(r.current={key:t,value:e()}),r.current.value}((function(){return r?h.executeLazy():h.execute()}),{options:Object(n.__assign)(Object(n.__assign)({},b),{onError:void 0,onCompleted:void 0}),context:a,tick:c}),m=r?v[1]:v;return Object(i.useEffect)((function(){return d.current||(d.current=h),function(){return h.cleanup()}}),[]),Object(i.useEffect)((function(){return h.afterExecute({lazy:r})}),[m.loading,m.networkStatus,m.error,m.data]),v}function b(e,t){return p(e,t,!1)}function d(e,t){return p(e,t,!0)}var h=function(e){function t(t){var r=t.options,n=t.context,i=t.result,a=t.setResult,o=e.call(this,r,n)||this;return o.runMutation=function(e){void 0===e&&(e={}),o.onMutationStart();var t=o.generateNewMutationId();return o.mutate(e).then((function(e){return o.onMutationCompleted(e,t),e})).catch((function(e){if(o.onMutationError(e,t),!o.getOptions().onError)throw e}))},o.verifyDocumentType(r.mutation,s.b.Mutation),o.result=i,o.setResult=a,o.mostRecentMutationId=0,o}return Object(n.__extends)(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,s.b.Mutation),e.client=this.refreshClient().client,[this.runMutation,e]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){var t=this.getOptions(),r=t.mutation,s=t.variables,i=t.optimisticResponse,a=t.update,o=t.context,u=void 0===o?{}:o,c=t.awaitRefetchQueries,l=void 0!==c&&c,p=t.fetchPolicy,b=Object(n.__assign)({},e),d=Object.assign({},s,b.variables);return delete b.variables,this.refreshClient().client.mutate(Object(n.__assign)({mutation:r,optimisticResponse:i,refetchQueries:b.refetchQueries||this.getOptions().refetchQueries,awaitRefetchQueries:l,update:a,context:u,fetchPolicy:p,variables:d},b))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var r=this.getOptions(),s=r.onCompleted,n=r.ignoreResults,i=e.data,o=e.errors,u=o&&o.length>0?new a.a({graphQLErrors:o}):void 0;this.isMostRecentMutation(t)&&!n&&this.updateResult({called:!0,loading:!1,data:i,error:u}),s&&s(i)},t.prototype.onMutationError=function(e,t){var r=this.getOptions().onError;this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0}),r&&r(e)},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){!this.isMounted||this.previousResult&&Object(o.a)(this.previousResult,e)||(this.setResult(e),this.previousResult=e)},t}(c);function v(e,t){var r=Object(i.useContext)(Object(s.c)()),a=Object(i.useState)({called:!1,loading:!1}),o=a[0],u=a[1],c=t?Object(n.__assign)(Object(n.__assign)({},t),{mutation:e}):{mutation:e},l=Object(i.useRef)();var p=(l.current||(l.current=new h({options:c,context:r,result:o,setResult:u})),l.current);return p.setOptions(c),p.context=r,Object(i.useEffect)((function(){return p.afterExecute()})),p.execute(o)}var m=function(e){function t(t){var r=t.options,s=t.context,n=t.setResult,i=e.call(this,r,s)||this;return i.currentObservable={},i.setResult=n,i.initialize(r),i}return Object(n.__extends)(t,e),t.prototype.execute=function(e){if(!0===this.getOptions().skip)return this.cleanup(),{loading:!1,error:void 0,data:void 0,variables:this.getOptions().variables};var t=e;this.refreshClient().isNew&&(t=this.getLoadingResult());var r=this.getOptions().shouldResubscribe;return"function"===typeof r&&(r=!!r(this.getOptions())),!1!==r&&this.previousOptions&&Object.keys(this.previousOptions).length>0&&(this.previousOptions.subscription!==this.getOptions().subscription||!Object(o.a)(this.previousOptions.variables,this.getOptions().variables)||this.previousOptions.skip!==this.getOptions().skip)&&(this.cleanup(),t=this.getLoadingResult()),this.initialize(this.getOptions()),this.startSubscription(),this.previousOptions=this.getOptions(),Object(n.__assign)(Object(n.__assign)({},t),{variables:this.getOptions().variables})},t.prototype.afterExecute=function(){this.isMounted=!0},t.prototype.cleanup=function(){this.endSubscription(),delete this.currentObservable.query},t.prototype.initialize=function(e){this.currentObservable.query||!0===this.getOptions().skip||(this.currentObservable.query=this.refreshClient().client.subscribe({query:e.subscription,variables:e.variables,fetchPolicy:e.fetchPolicy}))},t.prototype.startSubscription=function(){this.currentObservable.subscription||(this.currentObservable.subscription=this.currentObservable.query.subscribe({next:this.updateCurrentData.bind(this),error:this.updateError.bind(this),complete:this.completeSubscription.bind(this)}))},t.prototype.getLoadingResult=function(){return{loading:!0,error:void 0,data:void 0}},t.prototype.updateResult=function(e){this.isMounted&&this.setResult(e)},t.prototype.updateCurrentData=function(e){var t=this.getOptions().onSubscriptionData;this.updateResult({data:e.data,loading:!1,error:void 0}),t&&t({client:this.refreshClient().client,subscriptionData:e})},t.prototype.updateError=function(e){this.updateResult({error:e,loading:!1})},t.prototype.completeSubscription=function(){var e=this.getOptions().onSubscriptionComplete;e&&e(),this.endSubscription()},t.prototype.endSubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)},t}(c);function y(e,t){var r=Object(i.useContext)(Object(s.c)()),a=t?Object(n.__assign)(Object(n.__assign)({},t),{subscription:e}):{subscription:e},o=Object(i.useState)({loading:!a.skip,error:void 0,data:void 0}),u=o[0],c=o[1],l=Object(i.useRef)();var p=(l.current||(l.current=new m({options:a,context:r,setResult:c})),l.current);return p.setOptions(a,!0),p.context=r,Object(i.useEffect)((function(){return p.afterExecute()})),Object(i.useEffect)((function(){return p.cleanup.bind(p)}),[]),p.execute(u)}!function(){function e(){this.queryPromises=new Map,this.queryInfoTrie=new Map}e.prototype.registerSSRObservable=function(e,t){this.lookupQueryInfo(t).observable=e},e.prototype.getSSRObservable=function(e){return this.lookupQueryInfo(e).observable},e.prototype.addQueryPromise=function(e,t){return this.lookupQueryInfo(e.getOptions()).seen?t():(this.queryPromises.set(e.getOptions(),new Promise((function(t){t(e.fetchData())}))),null)},e.prototype.hasPromises=function(){return this.queryPromises.size>0},e.prototype.consumeAndAwaitPromises=function(){var e=this,t=[];return this.queryPromises.forEach((function(r,s){e.lookupQueryInfo(s).seen=!0,t.push(r)})),this.queryPromises.clear(),Promise.all(t)},e.prototype.lookupQueryInfo=function(e){var t=this.queryInfoTrie,r=e.query,s=e.variables,n=t.get(r)||new Map;t.has(r)||t.set(r,n);var i=JSON.stringify(s),a=n.get(i)||{seen:!1,observable:null};return n.has(i)||n.set(i,a),a}}()},548:function(e,t,r){},854:function(e,t,r){"use strict";r.r(t);var s=r(0),n=r.n(s),i=r(116),a=r(529),o=r(523),u=r(22),c=r(527),l=r(164),p=r(165);function b(){var e=Object(l.a)(["\n\nquery GetSingleOrder ($id: uuid!) {\n orders(where: {id: {_eq: $id}}) {\n    amount\n    created\n    isGift\n    id\n    isCancelled\n    isPaid\n    isShipped\n    notes\n    status\n    updated_at\n    order_payment {\n      itemTransactions {\n        itemId\n      }\n    }\n    addresses {\n      id\n      city\n      isinvoiceAddress\n      name\n      surname\n      street\n      town\n    }\n    order_items {\n      product {\n        fullDescription\n        id\n        name\n        price\n        discount\n        stock\n        rating\n        shortDescription\n        image {\n          path\n        }\n      }\n      qty\n    }\n    user_ordered {\n      email\n      id\n      name\n      surname\n      phone\n    }\n}}\n"]);return b=function(){return e},e}var d=r.n(p)()(b());r(548),t.default=function(e){e.location;var t=Object(u.g)(),r=Object(o.c)(d,{variables:{id:t.params.id}}),l=r.loading,p=r.data;Object(s.useEffect)((function(){localStorage.clear("cartData","notes","isGift")}),[]);var b=p&&p.orders[0].order_payment.itemTransactions.filter((function(e){return"009d7bdb-c14f-497d-9661-93a49b24585f"===e.itemId}));return n.a.createElement(s.Fragment,null,n.a.createElement(c.a,{headerTop:"visible"},n.a.createElement("div",{className:"cart-main-area pt-90 pb-100"},n.a.createElement("div",{className:"container"},l&&n.a.createElement("div",{id:"cover-spin",className:"loading"}),n.a.createElement("div",{className:"alert alert-success text-center",role:"alert"},"Say\u0131n"," ",p&&p.orders[0].user_ordered&&n.a.createElement("strong",null,p.orders[0].user_ordered.name.toUpperCase()," ",p.orders[0].user_ordered.surname.toUpperCase())," ","Sipari\u015finiz Ba\u015far\u0131yla Olu\u015fturulmu\u015ftur"," ",n.a.createElement("p",null,n.a.createElement("i",{className:"fa fa-2x fa-smile-o mb-3"})),n.a.createElement("h5",{className:"mb-3"},"Kargo takip bilgileri"," ",n.a.createElement("strong",null,p&&p.orders[0].user_ordered&&p.orders[0].user_ordered.email)," ","adresine g\xf6nderilecektir."),p&&p.orders[0].notes&&n.a.createElement("h5",null," ","Belirtmi\u015f oldu\u011funuz"," ",n.a.createElement("strong",null,'"',p.orders[0].notes,'"')," notunu dikkate alaca\u011f\u0131z."),n.a.createElement("p",{className:"mt-3"},p&&p.orders[0].isGift&&"Kargonuz talebiniz \xfczerine hediye paketi i\xe7erisinde g\xf6nderilecektir.")),n.a.createElement("h3",{className:"cart-page-title"},"Sipari\u015f \xd6zeti"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("div",{className:"table-content table-responsive cart-table-content"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"G\xf6rsel"),n.a.createElement("th",null,"\xdcr\xfcn Ad\u0131"),n.a.createElement("th",null,"Fiyat"),n.a.createElement("th",null,"Adet"),n.a.createElement("th",null,"Toplam"))),n.a.createElement("tbody",null,p&&p.orders[0].order_items.map((function(e){var t=e.product;return n.a.createElement("tr",{key:t.id},n.a.createElement("td",{className:"product-thumbnail"},n.a.createElement(i.b,{to:"/product/"+t.id},n.a.createElement(a.a,{path:t.image[0].path,className:"img-fluid",name:t.name}))),n.a.createElement("td",{className:"product-name"},n.a.createElement(i.b,{to:"/product/"+t.id},t.name)),n.a.createElement("td",{className:"product-price-cart"},t.price-(t.price*t.discount/100).toFixed(2)+" TL"),n.a.createElement("td",{className:"product-quantity"},n.a.createElement("div",{className:"cart-plus-minus"},e.qty)),n.a.createElement("td",{className:"product-subtotal"},((t.price-t.price*t.discount/100)*e.qty).toFixed(2)+" TL"),n.a.createElement("td",{className:"product-remove"}))}))))))),n.a.createElement("div",{className:"row"},p&&p.orders[0].addresses.map((function(e){return n.a.createElement("div",{className:"col-lg-4 col-md-12",key:e.id},n.a.createElement("div",{className:"grand-totall"},n.a.createElement("div",{className:"title-wrap"},n.a.createElement("h4",{className:"cart-bottom-title section-bg-gary-cart"},1===p.orders[0].addresses.length?"Teslimat Adresi":e.isinvoiceAddress?"Fatura Adresi":"Teslimat Adresi")),n.a.createElement("h5",null,e.name&&e.name.toUpperCase()," ",e.surname&&e.surname.toUpperCase()," "),n.a.createElement("h5",null," ",e.street),n.a.createElement("h4",{className:"grand-totall-title"},e.town," | ",e.city.toUpperCase())))})),p&&1===p.orders[0].addresses.length&&n.a.createElement("div",{className:"col-lg-4 col-md-12"},n.a.createElement("div",{className:"grand-totall"},n.a.createElement("div",{className:"title-wrap"},n.a.createElement("h4",{className:"cart-bottom-title section-bg-gary-cart"},"Fatura Adresi"),n.a.createElement("h4",{className:"grand-totall-title mt-5"},"Teslimat Adresiyle Ayn\u0131")))),n.a.createElement("div",{className:"col-lg-4 col-md-12"},n.a.createElement("div",{className:"grand-totall"},n.a.createElement("div",{className:"title-wrap"},n.a.createElement("h4",{className:"cart-bottom-title section-bg-gary-cart"},"Sepet Toplam\u0131")),n.a.createElement("h5",null,"\xdcr\xfcnler Toplam\u0131"," ",n.a.createElement("span",null,p&&p.orders[0].amount+" TL")),n.a.createElement("h5",null,"KDV ",n.a.createElement("span",null,"Dahil")),p&&n.a.createElement("h5",null,"Kargo ",n.a.createElement("span",null,b.length?"10 TL":"\xdccretsiz")),n.a.createElement("h4",{className:"grand-totall-title"},"Toplam \xd6denen"," ",p&&n.a.createElement("span",null,b.length?p.orders[0].amount+10+" TL":p.orders[0].amount+" TL")))))))))}}}]);
//# sourceMappingURL=28.a48304bf.chunk.js.map